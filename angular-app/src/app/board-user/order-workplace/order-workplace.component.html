<section>
    <h2>{{order.clientFullName}}</h2>
    <p>Phone number: {{order.clientPhoneNumber}}</p>
    <p>Email: {{order.clientEmail}}</p>
    <button (click)="backTotheClient()" class="btn btn-outline-secondary" type="button">Back to the client</button>
</section>

<div class="separator"></div>

<button type="button" class="btn btn-outline-danger" (click)="showOrderInfo()">Danger</button>


<div style="color: darkblue; margin: 15px;">
  <div class="d-grid gap-2">
    <button class="btn btn-outline-secondary" type="button" (click)="saveChanges()">Save changes</button>
  </div>
  <div *ngIf="isFailed" class="alert alert-danger" role="alert">
    {{failMessage}}
  </div>
  <div *ngIf="isSuccess" class="alert alert-success" role="alert">
    {{successMessage}}
  </div>
</div>

 
<section>

        <div class="progress text-bg-dark" role="progressbar" aria-label="Progress of order" 
        style="margin: 10px 0px; height: 20px;"
        aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
            <div class="progress-bar bg-primary" [style.width]="orderProgress">
              {{orderProgress}}
            </div>
        </div>

        <h2>Real need:</h2>
        <textarea class="custom-input-form w-100" style="height: 75px; font-size: 20px; border-radius: 10px;"
        [value]="order.realNeed" [(ngModel)]="order.realNeed"
        ></textarea>
        <p>Date of creation: {{order.dateOfCreation}}</p>

        <div style="display: flex;">
            <div class=" field-description">
              <label class="col-form-label">Address</label>
            </div>
            <div style="width: 100%;">
                <input class="form-control custom-input-form" type="text"
                [value]="order.address" [(ngModel)]="order.address">
            </div>
          </div>

        <div class="grid-container" style="display: grid;">
            <div class="outer-div ">
              <label class="centered-element " style="grid-area: description;">Estimate Budget:</label>
            </div>
            <div class="centered-element" style="grid-area: value;">
                <input class="form-control custom-input-form" type="number"  style="grid-area: value; width: 90px;"
                [value]="order.estimateBudged" [(ngModel)]="order.estimateBudged" (change)="delayCalculateProgress()">
            </div>
            <div class="outer-div" style="grid-area: range;">
                <input type="range" class="form-range centered-element" min="0" max="10000" step="100" 
                [value]="order.estimateBudged"
                (click)="delayCalculateProgress()" [(ngModel)]="order.estimateBudged"
                >
            </div>
        </div>
</section>

<section style="display: flex;">
    <section style="width: 430px;">

        <div class="row g-3 field-margin">
            <div class="col-auto field-description">
              <label class="col-form-label">Measurement offered</label>
            </div>
            <div class="col-auto">
                <div class="btn-group" role="group-measurement-offered" aria-label="Basic radio toggle button group">
                    <input type="radio" class="btn-check" name="btnradiomeasuroff" id="btnradiomeasuroff1" 
                    autocomplete="off" 
                    [checked]="!order.isMeasurementOffered" [(ngModel)]="order.isMeasurementOffered" [value]="false">
                    <label class="btn btn-outline-primary" for="btnradiomeasuroff1"
                    (click)="delayCalculateProgress()"
                    >NO</label>
                
                    <input type="radio" class="btn-check" name="btnradiomeasuroff" id="btnradiomeasuroff2" autocomplete="off" 
                    [checked]="order.isMeasurementOffered" [(ngModel)]="order.isMeasurementOffered" [value]="true">
                    <label class="btn btn-outline-primary" for="btnradiomeasuroff2"
                    (click)="delayCalculateProgress()"
                    >YES</label>
                  </div>
            </div>
        </div>

        <div class="row g-3 field-margin">
            <div class="col-auto field-description">
              <label class="col-form-label">Measurement taken</label>
            </div>
            <div class="col-auto">
                <div class="btn-group" role="group-measurement-taken" aria-label="Basic radio toggle button group">
                    <input type="radio" class="btn-check" name="btnradiomeasurtaken" id="btnradiomeasurtaken1" 
                    autocomplete="off" [(ngModel)]="order.isMeasurementsTaken" [value]="false">
                    <label class="btn btn-outline-primary" for="btnradiomeasurtaken1"
                    (click)="delayCalculateProgress()"
                    >NO</label>
                
                    <input type="radio" class="btn-check" name="btnradiomeasurtaken" id="btnradiomeasurtaken2" 
                    autocomplete="off" [(ngModel)]="order.isMeasurementsTaken" [value]="true">
                    <label class="btn btn-outline-primary" for="btnradiomeasurtaken2"
                    (click)="delayCalculateProgress()"
                    >YES</label>
                  </div>
            </div>
        </div>

        <div class="row g-3 field-margin">
            <div class="col-auto field-description">
              <label class="col-form-label">Meeting in office</label>
            </div>
            <div class="col-auto">
                <div class="btn-group" role="group-meeting-office" aria-label="Basic radio toggle button group">
                    <input type="radio" class="btn-check" name="meeting-in-office" id="meeting-in-office1" 
                    autocomplete="off" [(ngModel)]="order.wasMeetingInOffice" [value]="false">
                    <label class="btn btn-outline-primary" for="meeting-in-office1"
                    (click)="delayCalculateProgress()"
                    >NO</label>
                
                    <input type="radio" class="btn-check" name="meeting-in-office" id="meeting-in-office2" 
                    autocomplete="off" [(ngModel)]="order.wasMeetingInOffice" [value]="true">
                    <label class="btn btn-outline-primary" for="meeting-in-office2"
                    (click)="delayCalculateProgress()"
                    >YES</label>
                  </div>
            </div>
        </div>

        <div class="row g-3 field-margin">
            <div class="col-auto field-description">
              <label class="col-form-label">Calculation promised</label>
            </div>
            <div class="col-auto">
                <div class="btn-group" role="group-calculation-promised" aria-label="Basic radio toggle button group">
                    <input type="radio" class="btn-check" name="calc-promised" id="calc-promised1" 
                    autocomplete="off" [(ngModel)]="order.isCalculationPromised" [value]="false">
                    <label class="btn btn-outline-primary" for="calc-promised1"
                    (click)="delayCalculateProgress()"
                    >NO</label>
                
                    <input type="radio" class="btn-check" name="calc-promised" id="calc-promised2" 
                    autocomplete="off" [(ngModel)]="order.isCalculationPromised" [value]="true">
                    <label class="btn btn-outline-primary" for="calc-promised2"
                    (click)="delayCalculateProgress()"
                    >YES</label>
                  </div>
            </div>
        </div>

        <div class="row g-3 field-margin">
            <div class="col-auto field-description">
                <label class="col-form-label">Calculation shown</label>
            </div>
            <div class="col-auto">
                <div class="btn-group" role="group">
                    <input type="radio" class="btn-check" name="calc-shown" id="calc-shown1" autocomplete="off" 
                    [(ngModel)]="order.isCalculationShown" [value]="'NOT_SHOWN'">
                    <label class="btn btn-outline-primary" for="calc-shown1"
                    (click)="delayCalculateProgress()"
                    >NO</label>
                
                    <input type="radio" class="btn-check" name="calc-shown" id="calc-shown2" autocomplete="off" 
                    [(ngModel)]="order.isCalculationShown" [value]="'SHOWN_ONLINE'">
                    <label class="btn btn-outline-primary" for="calc-shown2"
                    (click)="delayCalculateProgress()"
                    >ONLINE</label>
                
                    <input type="radio" class="btn-check" name="calc-shown" id="calc-shown3" autocomplete="off"
                    [(ngModel)]="order.isCalculationShown" [value]="'SHOWN_IN_OFFICE'">
                    <label class="btn btn-outline-primary" for="calc-shown3"
                    (click)="delayCalculateProgress()"
                    >IN OFFICE</label>
                </div>
            </div>
        </div>

        <div class="row g-3 field-margin">
            <div class="col-auto field-description">
                <label class="col-form-label">Project shown</label>
            </div>
            <div class="col-auto">
                <div class="btn-group" role="group">
                    <input type="radio" class="btn-check" name="project-shown" id="project-shown1" autocomplete="off" 
                    [(ngModel)]="order.isProjectShown" [value]="'NOT_SHOWN'">
                    <label class="btn btn-outline-primary" for="project-shown1"
                    (click)="delayCalculateProgress()"
                    >NO</label>
                
                    <input type="radio" class="btn-check" name="project-shown" id="project-shown2" autocomplete="off" 
                    [(ngModel)]="order.isProjectShown" [value]="'SHOWN_ONLINE'">
                    <label class="btn btn-outline-primary" for="project-shown2"
                    (click)="delayCalculateProgress()"
                    >ONLINE</label>
                
                    <input type="radio" class="btn-check" name="project-shown" id="project-shown3" autocomplete="off" 
                    [(ngModel)]="order.isProjectShown" [value]="'SHOWN_IN_OFFICE'">
                    <label class="btn btn-outline-primary" for="project-shown3"
                    (click)="delayCalculateProgress()"
                    >IN OFFICE</label>
                </div>
            </div>
        </div>

        <div class="row g-3 field-margin">
            <div class="col-auto field-description">
              <label class="col-form-label">Project approved</label>
            </div>
            <div class="col-auto">
                <div class="btn-group" role="group-project-approved" aria-label="Basic radio toggle button group">
                    <input type="radio" class="btn-check" name="prjt-approved" id="prjt-approved1" 
                    autocomplete="off" [(ngModel)]="order.isProjectApproved" [value]="false">
                    <label class="btn btn-outline-primary" for="prjt-approved1"
                    (click)="delayCalculateProgress()"
                    >NO</label>
                
                    <input type="radio" class="btn-check" name="prjt-approved" id="prjt-approved2" 
                    autocomplete="off" [(ngModel)]="order.isProjectApproved" [value]="true">
                    <label class="btn btn-outline-primary" for="prjt-approved2"
                    (click)="delayCalculateProgress()"
                    >YES</label>
                  </div>
            </div>
        </div>

        <div class="row g-3 field-margin">
            <div class="col-auto field-description">
              <label class="col-form-label">Agreement prepared</label>
            </div>
            <div class="col-auto">
                <div class="btn-group" role="group-agreement-prepared" aria-label="Basic radio toggle button group">
                    <input type="radio" class="btn-check" name="agreem-prep" id="agreem-prep1" 
                    autocomplete="off" [(ngModel)]="order.isAgreementPrepared" [value]="false">
                    <label class="btn btn-outline-primary" for="agreem-prep1"
                    (click)="delayCalculateProgress()"
                    >NO</label>
                
                    <input type="radio" class="btn-check" name="agreem-prep" id="agreem-prep2" 
                    autocomplete="off" [(ngModel)]="order.isAgreementPrepared" [value]="true">
                    <label class="btn btn-outline-primary" for="agreem-prep2"
                    (click)="delayCalculateProgress()"
                    >YES</label>
                  </div>
            </div>
        </div>

    </section>

    <aside style="margin-left: 11%; margin-top: 25px">
      <div class="d-flex flex-column align-items-end">
        <div class="d-grid gap-2 col-12 col-md-10 justify-content-end">
          <button type="button" class="btn btn-outline-success" 
          [ngClass]="{ 'wrong-input': unableToSignAgreement }"
            (click)="openCalculationDialog()" [disabled]="order.isAgreementSigned">
            Edit items
            <span *ngIf="order.calculations?.length==0 || order.resultPrice!<=0">‚ö†Ô∏è</span>
          </button>
          <button type="button" class="btn btn-outline-success" 
            (click)="openConfirmSingingDialog()" 
            [disabled]="order.hasBeenPaid || order.calculations?.length==0 || order.resultPrice!<=0">
            Confirm the signing of the contract
            <span *ngIf="order.isAgreementSigned">‚úÖ</span>
          </button>
          <button type="button" class="btn btn-outline-success"
          (click)="openConfirmPaidDialog()"
          [disabled]="!order.isAgreementSigned">
            Confirm payment by the client
            <span *ngIf="order.hasBeenPaid">‚úÖ</span>
          </button>
          <button type="button" class="btn btn-outline-success" (click)="sentEmailToClient()">Sent email</button>
          <div *ngIf="isEmailSent" class="alert alert-success" role="alert">
            Email to client is sent üëå
          </div>
          <h2 >Result price: {{order.resultPrice === -1 || order.resultPrice === 0 ? '' : order.resultPrice}}</h2>
        </div>
      </div>

    </aside>

</section>


<div style="color: darkblue; margin: 15px;">
  <div class="d-grid gap-2">
    <button class="btn btn-outline-secondary" type="button" (click)="saveChanges()">Save changes</button>
  </div>
  <div *ngIf="isFailed" class="alert alert-danger" role="alert">
    {{failMessage}}
  </div>
  <div *ngIf="isSuccess" class="alert alert-success" role="alert">
    {{successMessage}}
  </div>
</div>


<div class="separator"></div>


<footer>
  <h3>Project photo</h3>
  <div id="carouselExample" class="carousel slide">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="..." class="d-block w-100" alt="...">
      </div>
      <div class="carousel-item">
        <img src="..." class="d-block w-100" alt="...">
      </div>
      <div class="carousel-item">
        <img src="..." class="d-block w-100" alt="...">
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>

</footer>

